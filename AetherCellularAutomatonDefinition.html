<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Aether cellular automaton definition</title>
	<meta name="description" content="The dinition of the rules of the Aether cellular automaton in addition to a 2D example.">
	<meta name="author" content="Jaume Ribas">
	<style>
		table {
			border-collapse: collapse;
			table-layout: fixed;
			text-align: center;
		}
		table, td {
			border: 1px solid black;
		}
		td {
			padding: 5px;
		}
		table.three td {
			width: 33%;
		}
		table.five td {
			width: 20%;
		}
		table.seven td {
			width: 14%;
		}
		table.nine td {
			width: 11%;
		}
	</style>
</head>

<body>
	<h1>Aether</h1>
	<p>Cellular automaton in which every position in the grid has an integer value. 
	This value is transferred between neighboring positions (von Neumann) following a set of rules. The total value of the grid is always conserved.</p>
	
	<h2>Definition:</h2>
	<p>Each step, the following actions are performed for every position:</p>
	<ol>
		<li>Make a list of the von Neumann neighbors whose value is smaller than that of the current position. If no neighbors meet this condition do nothing.</li>
		<li>Create a temporary value for each neighbor in the list initialized to zero.</li>
		<li>Compare the value of the current position with the biggest value from the neighbors in the list.</li>
		<li>Subtract this value difference from the current position's value, and divide it between all neighbors in the list and the current position. If there is any reminder from the division add it back to the current position's value.</li>
		<li>Add the quotient of this division to the temporary values of each neighbor in the list, not to the neighbor's values.</li>
		<li>Also add the quotient to the current position's value.</li>
		<li>Transfer to the neighbors in the list, with value equal to the biggest value in the list, their corresponding temporary values. And remove them from the list.</li>
		<li>If the list is not empty jump back to action 3. Note that the value of the current position may be smaller while the values of the remaining neighbors in the list has not changed. Only their temporary values may be bigger.</li>
	</ol>
	<p>The values of the positions at the next step result from adding to each position's remaining value the value transferred to them by their neighbors.</p>
	<p>Note that, because the value transferred to a neighbor depends on the values of the other neighbors, it is not enough to know the value of a position and that of its von Neumann neighbors at a given step to know the value this position will have at the next step.</p>
	
	<h2>2D Example:</h2>
	
	<h3>step 0</h3>
	<table class='three'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>101</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	<p>Start off with a grid padded with 0 and a value of 101 at one position.</p>
	<p>Perform the actions for the position with value 101:</p>
	<ol>
		<li>
			<p>Make a list of von Neumann neighbors with smaller value. In this example, all four neighbors have smaller value (<strong>0</strong>):</p>
			<p><strong>[{dir: UP, value: 0}, {dir: DOWN, value: 0}, {dir: LEFT, value: 0}, {dir: RIGHT, value: 0}]</strong></p>
		</li>
		<li>
			<p>Create temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 0}, {dir: DOWN, value: 0, tempValue: 0}, {dir: LEFT, value: 0, tempValue: 0}, {dir: RIGHT, value: 0, tempValue: 0}]</strong></p>
		</li>
		<li>
			<p>Compare the current position's value (<strong>101</strong>) with the biggest from the list (<strong>0</strong>):</p>
			<p><strong>101 - 0 = 101</strong></p>
		</li>
		<li>
			<p>Subtract the difference from the current position's value:</p>
			<p><strong>101 - 101 = 0</strong></p>
			<p>Divide it between the neighbors in the list (<strong>4</strong>) and the current position:</p>
			<p><strong>101/(4 + 1) = 20</strong></p>
			<p>Add the remainder (<strong>1</strong>) back to the current position:</p>
			<p><strong>0 + 101%5 = 1</strong></p>
		</li>
		<li>
			<p>Add the quotient (<strong>20</strong>) to the neighbors' temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 20}, {dir: DOWN, value: 0, tempValue: 20}, {dir: LEFT, value: 0, tempValue: 20}, {dir: RIGHT, value: 0, tempValue: 20}]</strong></p>
		</li>
		<li>
			<p>Add the quotient to the current position's value:</p>
			<p><strong>1 + 20 = 21</strong></p>
		</li>
		<li>
			<p>Transfer to the neighbors with value equal to the largest in the list (<strong>0</strong>) their corresponding temp values:</p>
			<p><strong>UP +20, DOWN +20, LEFT +20, RIGHT +20</strong></p>
			<p>Remove them from the list:</p>
			<p><strong>[]</strong></p>
		</li>
		<li>
			The list is empty.
		</li>
	</ol>
	<p>The resulting configuration is as follows:</p>
	
	<h3>step 1</h3>
	<table class='five'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>20</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>20</td><td>21</td><td>20</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>20</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	<p>Perform actions again:</p>
	<p>Top position with value 20:</p>
	<ol>
		<li>
			<p>In this case there are only three neighbors in the list since one neighbor has a value bigger than that of the current position (<strong>DOWN: 21</strong>)</p>
			<p><strong>[{dir: UP, value: 0}, {dir: LEFT, value: 0}, {dir: RIGHT, value: 0}]</strong></p>
		</li>
		<li>
			<p>Create temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 0}, {dir: LEFT, value: 0, tempValue: 0}, {dir: RIGHT, value: 0, tempValue: 0}]</strong></p>
		</li>
		<li>
			<p>Compare the current position's value (<strong>20</strong>) with the biggest from the list (<strong>0</strong>):</p>
			<p><strong>20 - 0 = 20</strong></p>
		</li>
		<li>
			<p>Subtract the difference from the current position's value:</p>
			<p><strong>20 - 20 = 0</strong></p>
			<p>Divide it between the neighbors in the list (<strong>3</strong>) and the current position:</p>
			<p><strong>20/(3 + 1) = 5</strong></p>
			<p>Add the remainder (<strong>0</strong>) back to the current position:</p>
			<p><strong>0 + 20%4 = 0</strong></p>
		</li>
		<li>
			<p>Add the quotient (<strong>5</strong>) to the neighbors' temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 5}, {dir: LEFT, value: 0, tempValue: 5}, {dir: RIGHT, value: 0, tempValue: 5}]</strong></p>
		</li>
		<li>
			<p>Add the quotient to the current position's value:</p>
			<p><strong>0 + 5 = 5</strong></p>
		</li>
		<li>
			<p>Transfer to the neighbors with value equal to the largest in the list (<strong>0</strong>) their corresponding temp values:</p>
			<p><strong>UP +5, LEFT +5, RIGHT +5</strong></p>
			<p>Remove them from the list:</p>
			<p><strong>[]</strong></p>
		</li>
		<li>
			The list is empty.
		</li>
	</ol>
	<p>For all other positions with value 20 the actions will be equivalent to those above, only changing the direction of the neighbors.</p>
	<p>Center position with value 21:</p>
	<ol>
		<li>
			<p><strong>[{dir: UP, value: 20}, {dir: DOWN, value: 20}, {dir: LEFT, value: 20}, {dir: RIGHT, value: 20}]</strong></p>
		</li>
		<li>
			<p><strong>[{dir: UP, value: 20, tempValue: 0}, {dir: DOWN, value: 20, tempValue: 0}, {dir: LEFT, value: 20, tempValue: 0}, {dir: RIGHT, value: 20, tempValue: 0}]</strong></p>
		</li>
		<li>
			<p><strong>21 - 20 = 1</strong></p>
		</li>
		<li>
			<p>Subtract the difference from the current position's value:</p>
			<p><strong>21 - 1 = 20</strong></p>
			<p>Divide it between the neighbors in the list (<strong>4</strong>) and the current position:</p>
			<p><strong>1/(4 + 1) = 0</strong></p>
			<p>Add the remainder (<strong>1</strong>) back to the current position:</p>
			<p><strong>20 + 1%5 = 21</strong></p>
		</li>
		<li>
			<p>Add the quotient (<strong>0</strong>) to the neighbors' temp values:</p>
			<p><strong>[{dir: UP, value: 20, tempValue: 0}, {dir: DOWN, value: 20, tempValue: 0}, {dir: LEFT, value: 20, tempValue: 0}, {dir: RIGHT, value: 20, tempValue: 0}]</strong></p>
		</li>
		<li>
			<p>Add the quotient to the current position's value:</p>
			<p><strong>21 + 0 = 21</strong></p>
		</li>
		<li>
			<p>Transfer to the neighbors with value equal to the largest in the list (<strong>0</strong>) their corresponding temp values:</p>
			<p><strong>UP +0, DOWN +0, LEFT +0, RIGHT +0</strong></p>
			<p>Remove them from the list:</p>
			<p><strong>[]</strong></p>
		</li>
		<li>
			The list is empty.
		</li>
	</ol>
	<p>In this case the actions have no effect.</p>
	<p>The resulting configuration is as follows:</p>
	
	<h3>step 2</h3>
	<table class='five'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>5</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>10</td><td>5</td><td>10</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>5</td><td>5</td><td>21</td><td>5</td><td>5</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>10</td><td>5</td><td>10</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>5</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	<p>Note that the corner positions with value 10 received value 5 from two of their neighbors. These values are added up to get the resulting value.</p>
	<p>Perform actions again:</p>
	<p>Top left corner with value 10:</p>
	<ol>
		<li>
			<p>In this case all neighbors are smaller but with two different values</p>
			<p><strong>[{dir: UP, value: 0}, {dir: DOWN, value: 5}, {dir: LEFT, value: 0}, {dir: RIGHT, value: 5}]</strong></p>
		</li>
		<li>
			<p>Create temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 0}, {dir: DOWN, value: 5, tempValue: 0}, {dir: LEFT, value: 0, tempValue: 0}, {dir: RIGHT, value: 5, tempValue: 0}]</strong></p>
		</li>
		<li>
			<p>Compare the current position's value (<strong>10</strong>) with the biggest from the list (<strong>5</strong>):</p>
			<p><strong>10 - 5 = 5</strong></p>
		</li>
		<li>
			<p>Subtract the difference from the current position's value:</p>
			<p><strong>10 - 5 = 5</strong></p>
			<p>Divide it between the neighbors in the list (<strong>4</strong>) and the current position:</p>
			<p><strong>5/(4 + 1) = 1</strong></p>
			<p>Add the remainder (<strong>0</strong>) back to the current position:</p>
			<p><strong>5 + 5%5 = 5</strong></p>
		</li>
		<li>
			<p>Add the quotient (<strong>1</strong>) to the neighbors' temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 1}, {dir: DOWN, value: 5, tempValue: 1}, {dir: LEFT, value: 0, tempValue: 1}, {dir: RIGHT, value: 5, tempValue: 1}]</strong></p>
		</li>
		<li>
			<p>Add the quotient to the current position's value:</p>
			<p><strong>5 + 1 = 6</strong></p>
		</li>
		<li>
			<p>Transfer to the neighbors with value equal to the largest in the list (<strong>5</strong>) their corresponding temp values:</p>
			<p><strong>DOWN +1, RIGHT +1</strong></p>
			<p>Remove them from the list:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 1}, {dir: LEFT, value: 0, tempValue: 1}]</strong></p>
		</li>
		<li>
			In this case the list is not empty, so jump back to step 3.
		</li>
	</ol>
	<ol start='3'>
		<li>
			<p>Compare the current position's remaining value (<strong>6</strong>) with the biggest from the list (<strong>0</strong>):</p>
			<p><strong>6 - 0 = 6</strong></p>
		</li>
		<li>
			<p>Subtract the difference from the current position's value:</p>
			<p><strong>6 - 6 = 0</strong></p>
			<p>Divide it between the remaining neighbors in the list (<strong>2</strong>) and the current position:</p>
			<p><strong>6/(2 + 1) = 2</strong></p>
			<p>Add the remainder (<strong>0</strong>) back to the current position:</p>
			<p><strong>0 + 6%3 = 0</strong></p>
		</li>
		<li>
			<p>Add the quotient (<strong>2</strong>) to the neighbors' temp values:</p>
			<p><strong>[{dir: UP, value: 0, tempValue: 3}, {dir: LEFT, value: 0, tempValue: 3}]</strong></p>
		</li>
		<li>
			<p>Add the quotient to the current position's value:</p>
			<p><strong>0 + 2 = 2</strong></p>
		</li>
		<li>
			<p>Transfer to the neighbors with value equal to the largest in the list (<strong>0</strong>) their corresponding temp values:</p>
			<p><strong>UP +3, LEFT +3</strong></p>
			<p>Remove them from the list:</p>
			<p><strong>[]</strong></p>
		</li>
		<li>
			The list is empty.
		</li>
	</ol>
	<p>Perform the actions for all other positions to get the next step's configuration:</p>
	
	<h3>step 3</h3>
	<table class='seven'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>4</td><td>2</td><td>4</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>4</td><td>2</td><td>10</td><td>2</td><td>4</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td><td>2</td><td>10</td><td>9</td><td>10</td><td>2</td><td>1</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>4</td><td>2</td><td>10</td><td>2</td><td>4</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>4</td><td>2</td><td>4</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	<p>Continue until the value is so spread out that the actions take no effect.</p>
	
	<h3>step 4</h3>
	<table class='nine'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;1&nbsp;</td><td>1</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>1</td><td>2</td><td>6</td><td>4</td><td>6</td><td>2</td><td>1</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>1</td><td>4</td><td>4</td><td>9</td><td>4</td><td>4</td><td>1</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>1</td><td>2</td><td>6</td><td>4</td><td>6</td><td>2</td><td>1</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>1</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	
	<h3>step 5</h3>
	<table class='nine'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;1&nbsp;</td><td>2</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>3</td><td>3</td><td>3</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>1</td><td>3</td><td>4</td><td>5</td><td>4</td><td>3</td><td>1</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>2</td><td>3</td><td>5</td><td>5</td><td>5</td><td>3</td><td>2</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>1</td><td>3</td><td>4</td><td>5</td><td>4</td><td>3</td><td>1</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>3</td><td>3</td><td>3</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;1&nbsp;</td><td>2</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	
	<h3>step 6</h3>
	<table class='nine'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;2&nbsp;</td><td>1</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>4</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td><td>1</td><td>4</td><td>4</td><td>5</td><td>4</td><td>4</td><td>1</td><td>1</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>4</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;2&nbsp;</td><td>1</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	
	
	<h3>step 7</h3>
	<table class='nine'>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;2&nbsp;</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>3</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>4</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>2</td><td>2</td><td>4</td><td>4</td><td>4</td><td>2</td><td>2</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>2</td><td>2</td><td>3</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;2&nbsp;</td><td>2</td><td>2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
		</tr>
	</table>
	<p>END</p>
</body>
</html>